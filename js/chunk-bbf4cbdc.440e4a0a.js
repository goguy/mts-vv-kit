(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bbf4cbdc"],{"19f5":function(t,e,r){},2212:function(t,e,r){"use strict";r("19f5")},e88f:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{id:"standard_report",tag:"section"}},[r("v-row",{staticClass:"mt-5"},[r("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[r("v-sheet",{attrs:{width:"640"}},[r("p",{staticClass:"text-center my-1 font-weight-black"},[t._v("교육결과 보고서")]),r("v-sheet",[r("v-simple-table",[r("thead",[r("tr",[r("td",{staticClass:"text-left font-weight-bold gl3",attrs:{width:"20%"}},[t._v("소속 ")]),r("td",{staticClass:"text-left",attrs:{width:"44%"}},[t._v(" 설비관리팀")]),r("td",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"18%"}},[t._v("교육자 ")]),r("td",{staticClass:"text-left",attrs:{width:"18%"}},[t._v(" "+t._s(t.workerInfo.name))])]),r("tr",[r("td",{staticClass:"text-left font-weight-bold gl3"},[t._v("교육일시 ")]),r("td",{staticClass:"text-left",attrs:{colspan:"3"}},[t._v(" "+t._s(t.workerInfo.reg_dt))])]),r("tr",[r("td",{staticClass:"text-left font-weight-bold gl3"},[t._v("교육과정명 ")]),r("td",{staticClass:"text-left",attrs:{colspan:"3"}},[t._v(" "+t._s(t.workInfo[0].name))])])])])],1),r("v-sheet",{staticClass:"mt-5"},[r("v-simple-table",[r("thead",[r("tr",[r("td",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"64%",colspan:"2"}},[t._v("평가항목 ")]),r("td",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"18%"}},[t._v("기준점수 ")]),r("td",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"18%"}},[t._v("교육자 점수")])])]),r("tbody",[r("tr",[r("td",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"20%",rowspan:"3"}},[t._v("1. 작업시작 전"),r("br"),t._v(" 준비단계"),r("br"),t._v("(50점) ")]),r("td",{staticClass:"text-left text-caption",attrs:{width:"44%"}},[t._v(" 작업가이드 숙지")]),r("td",{staticClass:"text-center",attrs:{width:"18%"}},[t._v(" 10점")]),r("td",{staticClass:"text-center",attrs:{width:"18%"}},[t._v(" "+t._s(t.guideScore))])]),r("tr",[r("td",{staticClass:"text-left text-caption"},[t._v(" 작업허가서 발행")]),r("td",{staticClass:"text-center"},[t._v(" 10점")]),r("td",{staticClass:"text-center"},[t._v(" "+t._s(t.permitScore))])]),r("tr",[r("td",{staticClass:"text-left text-caption"},[t._v(" 적합한 보호구 및 안전장치 선택여부")]),r("td",{staticClass:"text-center"},[t._v(" 30점")]),r("td",{staticClass:"text-center"},[t._v(" "+t._s(t.equipScore))])]),r("tr",[r("td",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"20%",rowspan:"2"}},[t._v("2. 작업 처리 사항"),r("br"),t._v("(50점) ")]),r("td",{staticClass:"text-left text-caption",attrs:{width:"44%"}},[t._v(" 작업시간 준수여부")]),r("td",{staticClass:"text-center",attrs:{width:"18%"}},[t._v(" 10점")]),r("td",{staticClass:"text-center",attrs:{width:"18%"}},[t._v(" "+t._s(t.workTimeScore))])]),r("tr",[r("td",{staticClass:"text-left text-caption"},[t._v(" 작업 확인 여부")]),r("td",{staticClass:"text-center"},[t._v(" 40점")]),r("td",{staticClass:"text-center"},[t._v(" "+t._s(t.workConfirmScore))])])]),r("thead",[r("tr",[r("td",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"64%",colspan:"2"}},[t._v(" 총 점")]),r("td",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"18%"}},[t._v(" 100점")]),r("td",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"18%"}},[t._v(" "+t._s(t.totalScore))])])])])],1),r("v-sheet",{staticClass:"mt-5"},[r("v-simple-table",[r("thead",[r("tr",[r("td",{staticClass:"text-center font-weight-bold gl3"},[t._v("교육강평")])])]),r("tbody",[r("tr",[r("td",{staticStyle:{height:"150px"}})])])])],1)],1)],1)],1),r("div",{staticClass:"text-center"},[r("v-btn",{staticClass:"ma-5",attrs:{color:"primary",depressed:""},on:{click:t.submitReport}},[t._v(" 제출하기 ")]),r("v-btn",{attrs:{color:"success",depressed:""},on:{click:t.generatePDF}},[t._v(" Generate PDF ")])],1),r("div",[r("vue-html2pdf",{ref:"html2Pdf",attrs:{"show-layout":!1,"float-layout":!0,"enable-download":!0,"preview-modal":!0,"paginate-elements-by-height":1400,filename:"교육결과보고서","pdf-quality":2,"manual-pagination":!1,"pdf-format":"a4","pdf-orientation":"landscape","pdf-content-width":"800px","html-to-pdf-options":t.htmlToPdfOptions},on:{progress:function(e){return t.onProgress(e)},hasStartedGeneration:function(e){return t.hasStartedGeneration()},hasGenerated:function(e){return t.hasGenerated(e)}}},[r("section",{attrs:{slot:"pdf-content"},slot:"pdf-content"},[r("section",{staticClass:"pdf-item"},[r("section",{staticClass:"mt-10 mlr-5"},[r("p",{staticClass:"text-center mb-1 font-weight-black fs-20"},[t._v("교육결과 보고서")])]),r("section",{staticClass:"mlr-5"},[r("table",[r("thead",[r("tr",[r("th",{staticClass:"text-left font-weight-bold gl3",attrs:{width:"20%"}},[t._v("소속 ")]),r("td",{staticClass:"text-left",attrs:{width:"44%"}},[t._v(" 설비관리팀")]),r("th",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"18%"}},[t._v("교육자 ")]),r("td",{staticClass:"text-left",attrs:{width:"18%"}},[t._v(" "+t._s(t.workerInfo.name))])]),r("tr",[r("th",{staticClass:"text-left font-weight-bold gl3"},[t._v("교육일시 ")]),r("td",{staticClass:"text-left",attrs:{colspan:"3"}},[t._v(" "+t._s(t.workerInfo.reg_dt))])]),r("tr",[r("th",{staticClass:"text-left font-weight-bold gl3"},[t._v("교육과정명 ")]),r("td",{staticClass:"text-left",attrs:{colspan:"3"}},[t._v(" "+t._s(t.workInfo[0].name))])])])])]),r("section",{staticClass:"mt-3 mlr-5"},[r("table",[r("thead",[r("tr",[r("th",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"64%",colspan:"2"}},[t._v("평가항목 ")]),r("th",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"18%"}},[t._v("기준점수 ")]),r("th",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"18%"}},[t._v("교육자 점수")])])]),r("tbody",[r("tr",[r("th",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"20%",rowspan:"3"}},[t._v("1. 작업시작 전"),r("br"),t._v(" 준비단계"),r("br"),t._v("(50점) ")]),r("td",{staticClass:"text-left text-caption",attrs:{width:"44%"}},[t._v(" 작업가이드 숙지")]),r("td",{staticClass:"text-center",attrs:{width:"18%"}},[t._v(" 10점")]),r("td",{staticClass:"text-center",attrs:{width:"18%"}},[t._v(t._s(t.guideScore))])]),r("tr",[r("td",{staticClass:"text-left text-caption"},[t._v(" 작업허가서 발행")]),r("td",{staticClass:"text-center"},[t._v(" 10점")]),r("td",{staticClass:"text-center"},[t._v(t._s(t.permitScore))])]),r("tr",[r("td",{staticClass:"text-left text-caption"},[t._v(" 적합한 보호구 및 안전장치 선택여부")]),r("td",{staticClass:"text-center"},[t._v(" 30점")]),r("td",{staticClass:"text-center"},[t._v(t._s(t.equipScore))])]),r("tr",[r("th",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"20%",rowspan:"2"}},[t._v("2. 작업 처리 사항"),r("br"),t._v("(50점) ")]),r("td",{staticClass:"text-left text-caption",attrs:{width:"44%"}},[t._v(" 작업시간 준수여부")]),r("td",{staticClass:"text-center",attrs:{width:"18%"}},[t._v(" 10점")]),r("td",{staticClass:"text-center",attrs:{width:"18%"}},[t._v(t._s(t.workTimeScore))])]),r("tr",[r("td",{staticClass:"text-left text-caption"},[t._v(" 작업 확인 여부")]),r("td",{staticClass:"text-center"},[t._v(" 40점")]),r("td",{staticClass:"text-center"},[t._v(t._s(t.workConfirmScore))])])]),r("thead",[r("tr",[r("th",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"64%",colspan:"2"}},[t._v(" 총 점")]),r("th",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"18%"}},[t._v(" 100점")]),r("th",{staticClass:"text-center font-weight-bold gl3",attrs:{width:"18%"}},[t._v(t._s(t.totalScore))])])])])]),r("section",{staticClass:"mt-3 mlr-5"},[r("table",[r("thead",[r("tr",[r("th",{staticClass:"text-center font-weight-bold gl3"},[t._v("교육강평")])])]),r("tbody",[r("tr",[r("td",{staticStyle:{height:"150px"}})])])])])])])])],1),r("v-snackbar",{attrs:{vertical:t.snackbar.vertical},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[r("v-btn",t._b({attrs:{color:"indigo",text:""},on:{click:function(e){t.snackbar.isSnackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar.isSnackbar,callback:function(e){t.$set(t.snackbar,"isSnackbar",e)},expression:"snackbar.isSnackbar"}},[t._v(" "+t._s(t.snackbar.message)+" ")])],1)},s=[],n=r("b85c"),o=r("5530"),a=(r("d3b7"),r("a15b"),r("b0c0"),r("e9c4"),r("4de4"),r("2f62")),c=r("0063"),_=r("6480"),l=r("7aaa"),d="workStore",u="workerStore",h="equipmentStore",f="workEquipmentStore",E="workerEquipmentStore",w="tdmotionStore",m="workTdmotionStore",R="workerTdmotionStore",b="workerResultStore",T="workerResultItemStore",k="resultStore",S="resultItemStore",p={components:{VueHtml2pdf:_["a"]},name:"standard_report",mixins:[l["a"]],data:function(){return{htmlToPdfOptions:{margin:0,filename:"교육결과보고서.pdf",image:{type:"jpeg",quality:.98},enableLinks:!1,html2canvas:{scale:1,useCORS:!0},jsPDF:{unit:"in",format:"a4",orientation:"portrait"}},workerResult:{result_id:0,worker_id:0,work_id:0,score:0,reg_dt:null},resultItemPayload:{index:0,resultItem:[]},snackbar:{isSnackbar:!1,vertical:!0,message:""}}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(a["c"])(d,["GE_WORK_LIST"])),Object(a["c"])(u,["GE_WORKER"])),Object(a["c"])(h,["GE_EQUIPMENT_LIST"])),Object(a["c"])(f,["GE_WORK_EQUIPMENT_LIST"])),Object(a["c"])(E,["GE_WORKER_EQUIPMENT_LIST"])),Object(a["c"])(w,["GE_TDMOTION_LIST"])),Object(a["c"])(m,["GE_WORK_TDMOTION_LIST"])),Object(a["c"])(R,["GE_WORKER_TDMOTION_LIST"])),Object(a["c"])(T,["GE_WORKER_RESULT_ITEM","GE_WORKER_RESULT_ITEM_LIST"])),Object(a["c"])(b,["GE_WORKER_RESULT","GE_WORKER_RESULT_LIST"])),Object(a["c"])(S,["GE_RESULT_ITEM","GE_RESULT_ITEM_LIST"])),Object(a["c"])(k,["GE_RESULT","GE_RESULT_LIST"])),{},{workInfo:function(){var t=this,e=c["a"].from(this.GE_WORK_LIST).where((function(e){return e.work_id===t.GE_WORKER.work_id})).toArray();return e},workerInfo:function(){return this.GE_WORKER},guideScore:function(){var t=this.getResultTypeList("guide");return this.GE_WORKER.guide_chk?t.score:0},permitScore:function(){var t=this.getResultTypeList("permit");return this.GE_WORKER.order_chk?t.score:0},equipScore:function(){var t=this.getResultTypeList("equip_choice"),e=this.queryWorkEquipment("protect").length+this.queryWorkEquipment("safety").length,r=this.queryWorkAndWorkerEquipment("protect").length+this.queryWorkAndWorkerEquipment("safety").length;return 0===r?0:r===e?t.score:Math.floor(r/e*t.score)},workTimeScore:function(){var t=this.getResultTypeList("work_time");return"undefined"===t.worker_id?0:t.worker_id===this.GE_WORKER.worker_id&&"Y"===t.is_yn?t.score:0},workConfirmScore:function(){var t=this.getResultTypeList("work_confirm");if("undefined"===t.worker_id){var e=this.workAndworkerTdmotionInfo.length;return e>0?Math.round(e/this.queryWorkTdmotion.length*t.score):0}return t.worker_id===this.GE_WORKER.worker_id&&"Y"===t.is_yn?t.score:0},totalScore:function(){var t=this.guideScore+this.permitScore+this.equipScore+this.workTimeScore+this.workConfirmScore;return t},queryWorkTdmotion:function(){var t=this,e=c["a"].from(this.GE_TDMOTION_LIST).where((function(t){return"normal"===t.type})).select((function(t){return{work_motion_id:t.motion_id,work_montion_name:t.name,type:t.type}})).join(c["a"].from(this.GE_WORK_TDMOTION_LIST).where((function(e){return e.work_id===t.GE_WORKER.work_id&&"normal"===e.type})),(function(t){return t.work_motion_id}),(function(t){return t.motion_id}),(function(t,e){return Object(o["a"])(Object(o["a"])({},t),e)})).toArray();return e},workAndworkerTdmotionInfo:function(){var t=this,e=c["a"].from(this.GE_TDMOTION_LIST).where((function(t){return"normal"===t.type})).select((function(t){return{work_motion_id:t.motion_id,work_montion_name:t.name,type:t.type}})).join(c["a"].from(this.GE_WORK_TDMOTION_LIST).where((function(e){return e.work_id===t.GE_WORKER.work_id&&"normal"===e.type})),(function(t){return t.work_motion_id}),(function(t){return t.motion_id}),(function(t,e){return Object(o["a"])(Object(o["a"])({},t),e)})).toArray(),r=c["a"].from(this.GE_TDMOTION_LIST).select((function(t){return{worker_motion_id:t.motion_id,worker_montion_name:t.name,type:t.type}})).join(c["a"].from(this.GE_WORKER_TDMOTION_LIST).where((function(e){return e.worker_id===t.GE_WORKER.worker_id})),(function(t){return t.worker_motion_id}),(function(t){return t.motion_id}),(function(t,e){return Object(o["a"])(Object(o["a"])({},t),e)})).toArray(),i=c["a"].from(e).join(c["a"].from(r),(function(t){return t.work_motion_id}),(function(t){return t.worker_motion_id}),(function(t,e){return Object(o["a"])(Object(o["a"])({},t),{},{right:e})})).toArray();return i}}),watch:{},mounted:function(){this.initgQuery(),this.updateResult()},beforeDestroy:function(){},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(a["b"])(T,["AC_WORKER_RESULT_ITEM","AC_WORKER_RESULT_ITEM_PUSH","AC_WORKER_RESULT_ITEM_LIST"])),Object(a["b"])(b,["AC_WORKER_RESULT","AC_WORKER_RESULT_PUSH","AC_WORKER_RESULT_LIST"])),Object(a["b"])(S,["AC_RESULT_ITEM_EDIT"])),Object(a["b"])(k,["AC_RESULT_EDIT"])),{},{initgQuery:function(){var t=this.GE_RESULT_ITEM_LIST;this.GE_RESULT_LIST,console.log("query",JSON.stringify(t,null,2))},updateResult:function(){this.GE_WORKER.guide_chk&&this.recordWorkerResultItem("guide","Y"),this.GE_WORKER.order_chk&&this.recordWorkerResultItem("permit","Y");var t=this.queryWorkAndWorkerEquipment("protect").length+this.queryWorkAndWorkerEquipment("safety").length;t>0&&this.recordWorkerResultItem("equip_choice","Y")},getResultTypeList:function(t){var e=this,r=this.GE_WORK_LIST.filter((function(t){return t.work_id===e.GE_WORKER.work_id}))[0].type,i=this.GE_RESULT_LIST.filter((function(t){return t.type===r}))[0];return i=this.GE_RESULT_ITEM_LIST.filter((function(e){return e.result_id===i.result_id&&e.name===t}))[0],i},queryWorkEquipment:function(t){var e=this,r=c["a"].from(this.GE_EQUIPMENT_LIST).join(c["a"].from(this.GE_WORK_EQUIPMENT_LIST).where((function(t){return t.work_id===e.GE_WORKER.work_id})),(function(t){return t.equipment_id}),(function(t){return t.equipment_id}),(function(t,e){return Object(o["a"])(Object(o["a"])({},t),e)})).where((function(e){return e.type===t})).orderBy((function(t){return t.disp_ord})).toArray();return r},queryWorkerEquipment:function(t){var e=this,r=c["a"].from(this.GE_EQUIPMENT_LIST).join(c["a"].from(this.GE_WORKER_EQUIPMENT_LIST).where((function(t){return t.worker_id===e.GE_WORKER.worker_id})),(function(t){return t.equipment_id}),(function(t){return t.equipment_id}),(function(t,e){return Object(o["a"])(Object(o["a"])({},t),e)})).where((function(e){return e.type===t})).orderBy((function(t){return t.disp_ord})).toArray();return r},queryWorkAndWorkerEquipment:function(t){var e=c["a"].from(this.queryWorkEquipment(t)).join(c["a"].from(this.queryWorkerEquipment(t)),(function(t){return t.equipment_id}),(function(t){return t.equipment_id}),(function(t,e){return Object(o["a"])(Object(o["a"])({},t),{},{right:e})})).toArray();return e},saveData:function(){var t=this;console.log("saveData");var e=this.GE_WORK_LIST.filter((function(e){return e.work_id===t.GE_WORKER.work_id}))[0].type,r=this.GE_RESULT_LIST.filter((function(t){return t.type===e}))[0];r=this.GE_RESULT_ITEM_LIST.filter((function(t){return t.result_id===r.result_id})),console.log("query",JSON.stringify(r,null,2));var i,s=Object(n["a"])(r);try{for(s.s();!(i=s.n()).done;){var o=i.value;switch(this.GE_WORKER_RESULT_ITEM.result_item_id=o.result_item_id,this.GE_WORKER_RESULT_ITEM.worker_id=this.GE_WORKER.worker_id,this.GE_WORKER_RESULT_ITEM.work_id=this.GE_WORKER.work_id,o.name){case"guide":console.log("obj.name",o.name),this.GE_WORKER_RESULT_ITEM.score=this.guideScore;break;case"permit":console.log("obj.name",o.name),this.GE_WORKER_RESULT_ITEM.score=this.permitScore;break;case"equip_choice":console.log("obj.name",o.name),this.GE_WORKER_RESULT_ITEM.score=this.equipScore;break;case"work_time":console.log("obj.name",o.name),this.GE_WORKER_RESULT_ITEM.score=this.workTimeScore;break;case"work_confirm":console.log("obj.name",o.name),this.GE_WORKER_RESULT_ITEM.score=this.workConfirmScore;break;default:console.log("default")}console.log("this.GE_WORKER_RESULT_ITEM",JSON.stringify(this.GE_WORKER_RESULT_ITEM,null,2)),this.AC_WORKER_RESULT_ITEM_PUSH(JSON.parse(JSON.stringify(this.GE_WORKER_RESULT_ITEM)))}}catch(a){s.e(a)}finally{s.f()}},submitReport:function(){var t=this;console.log("submitReport");var e=this.GE_WORKER_RESULT_ITEM_LIST.filter((function(e){return e.worker_id===t.GE_WORKER.worker_id&&e.work_id===t.GE_WORKER.work_id}));return console.log("chkData",JSON.stringify(e,null,2)),console.log("chkData.length",e.length),0===e.length?(this.saveData(),void this.setSnackbar("제출했습니다.")):void this.setSnackbar("이미 제출했습니다.")},recordWorkerResultItem:function(t,e){var r=this,i=this.GE_WORK_LIST.filter((function(t){return t.work_id===r.GE_WORKER.work_id}))[0].type,s=this.GE_RESULT_LIST.filter((function(t){return t.type===i}))[0];s=this.GE_RESULT_ITEM_LIST.filter((function(e){return e.result_id===s.result_id&&e.name===t}))[0],s.worker_id=this.GE_WORKER.worker_id,s.is_yn=e,this.resultItemPayload.index=s.result_item_id,this.resultItemPayload.resultItem=s,this.AC_RESULT_ITEM_EDIT(this.resultItemPayload)},setSnackbar:function(t){this.snackbar.isSnackbar=!0,this.snackbar.message=t,this.snackbar.vertical=!0},generatePDF:function(){this.$refs.html2Pdf.generatePdf()},onProgress:function(t){console.log("onProgress-event",t)},hasStartedGeneration:function(){console.log("hasStartedGeneration")},hasGenerated:function(t){console.log("hasGenerated-event",t)}})},O=p,v=(r("2212"),r("2877")),g=r("6544"),I=r.n(g),C=r("8336"),x=r("62ad"),y=r("a523"),L=r("0fd9"),W=r("8dd9"),G=r("1f4f"),j=r("2db4"),K=Object(v["a"])(O,i,s,!1,null,null,null);e["default"]=K.exports;I()(K,{VBtn:C["a"],VCol:x["a"],VContainer:y["a"],VRow:L["a"],VSheet:W["a"],VSimpleTable:G["a"],VSnackbar:j["a"]})}}]);
//# sourceMappingURL=chunk-bbf4cbdc.440e4a0a.js.map