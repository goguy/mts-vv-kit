(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-000d1650"],{2084:function(e,t,r){},"2b75":function(e,t,r){"use strict";r("2084")},"612d":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"pa-0",attrs:{id:"choke_work",fluid:""}},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"2"}}),r("v-col",[r("v-container",{staticClass:"mt-5"},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{staticClass:"mr-auto",attrs:{cols:"auto"}},[r("p",{staticClass:"text-h5 font-weight-regular"},[e._v(" "+e._s(e.workName)+" ")])]),r("v-col",{attrs:{cols:"auto"}},[r("p",{staticClass:"text-h6 font-weight-regular"},[r("v-icon",[e._v(" mdi-account")]),e._v("   "+e._s(this.GE_WORKER.name)+" ")],1)])],1)],1)],1),r("v-col",{attrs:{cols:"2"}})],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12",sm:"12",md:"1",lg:"2"}}),r("v-col",[r("v-card",{directives:[{name:"show",rawName:"v-show",value:!e.isShowOxygenVideoPlay,expression:"!isShowOxygenVideoPlay"}],staticClass:"pa-5 grey lighten-5"},[e.isOutbreak?e._e():r("v-sheet",{staticClass:"blue-grey darken-4",attrs:{height:"50",dark:""}},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("div",[r("div",{staticClass:"d-inline float-left"},[r("v-btn",{staticClass:"blue-grey darken-4",attrs:{small:"",dark:""},on:{click:function(t){t.stopPropagation(),e.playerDrawer=!e.playerDrawer}}},[e.playerDrawer?r("v-icon",[e._v(" mdi-close ")]):r("v-icon",[e._v(" mdi-view-list ")])],1)],1),r("div",{staticClass:"d-inline float-right font-weight-thin"},[r("v-btn",{staticClass:"blue-grey darken-4",attrs:{"x-small":""},on:{click:e.previousPlayer}},[r("v-icon",[e._v(" mdi-chevron-left ")])],1),e._v(" "+e._s(e.playerListCurrentIndex+1)+" / "+e._s(e.videoList.length)+" "),r("v-btn",{staticClass:"blue-grey darken-4",attrs:{"x-small":""},on:{click:e.nextPlayer}},[r("v-icon",[e._v(" mdi-chevron-right ")])],1)],1),r("p",{staticClass:"text-h5 text-center font-weight-light"},[e._v(" "+e._s(e.playerTitle)+" ")])])])],1)],1),r("v-sheet",{staticClass:"vjs-wrap overflow-hidden",staticStyle:{position:"relative"}},[r("v-navigation-drawer",{staticClass:"blue-grey lighten-5",attrs:{absolute:"",temporary:""},model:{value:e.playerDrawer,callback:function(t){e.playerDrawer=t},expression:"playerDrawer"}},[r("v-list",{attrs:{nav:"",dense:"",shaped:""}},[r("v-list-item-group",{attrs:{color:"primary"},model:{value:e.playerListCurrentIndex,callback:function(t){e.playerListCurrentIndex=t},expression:"playerListCurrentIndex"}},e._l(e.watchedPlay,(function(t){return r("v-list-item",{key:t.name,attrs:{link:""},on:{click:function(r){return e.vjsPlayerListLink(t.disp_ord)}}},[r("v-list-item-content",[r("v-list-item-title",{staticClass:"text-subtitle-1",domProps:{textContent:e._s(t.name)}})],1)],1)})),1)],1)],1),r("video-player-list",{attrs:{options:e.videoOptions,playerList:e.videoList},on:{player:e.onPlayer,playerState:e.onPlayerState}}),r("v-fab-transition",[r("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.playerBtnNextHidden,expression:"playerBtnNextHidden"}],staticClass:"mb-7 text-subtitle-1",attrs:{depressed:"",color:"pink",dark:"",small:"",absolute:"",bottom:"",right:""},on:{click:e.nextPlayer}},[e._v(" next "),r("v-icon",[e._v("mdi-chevron-right")])],1)],1)],1),r("v-fab-transition",[r("v-overlay",{attrs:{absolute:e.playerOverAbsolute,value:e.playerOverlay}})],1)],1),r("v-card",{directives:[{name:"show",rawName:"v-show",value:e.isShowOxygenVideoPlay,expression:"isShowOxygenVideoPlay"}],staticClass:"pa-5 grey lighten-5"},[r("v-sheet",{staticClass:"vjs-wrap"},[r("video-playering",{ref:"pVideoPlayering"})],1)],1),r("v-row",[r("v-col",{attrs:{align:"center",justify:"space-around"}},["normal"===e.workStep.type&&"0"===e.workStep.step?[r("div",{staticClass:"d-inline float-left mt-2"}),r("div",{staticClass:"d-inline float-right mt-2"},[e.playerListCurrentIndex+1===e.videoList.length?r("v-btn",{staticClass:"mt-3",attrs:{depressed:"",dark:"",large:"",color:e.oxygenDensity.state.color,elevation:"1"},on:{click:e.btnOxygenDensity}},[e.isPrepareOutbreak?r("v-progress-circular",{staticClass:"mr-2",attrs:{indeterminate:"",color:"white",size:"20"}}):e._e(),e._v(" 산소농도측정 ")],1):e._e()],1),r("div",{attrs:{clsaa:"d-inline text-center mt-2"}},[!1===e.isNormalPlayer?r("v-btn",{staticClass:"ma-2",attrs:{depressed:"",dark:"",large:"",color:"primary",elevation:"1"},on:{click:e.btnPlayWork}},[e._v(" 작업재개 ")]):!0===e.isNormalPlayer?r("v-btn",{staticClass:"ma-2",attrs:{depressed:"",dark:"",large:"",color:"primary",elevation:"1"},on:{click:e.btnStopWork}},[e._v(" 작업중지 ")]):e._e()],1)]:"normal"===e.workStep.type&&"1"===e.workStep.step?[r("div",{staticClass:"d-inline float-left mt-2"},["ended"===e.playerVideoState?r("v-btn",{staticClass:"ma-3",attrs:{depressed:"",dark:"",large:"",color:"blue-grey",elevation:"1"},on:{click:e.btnNomalVideoPlayer}},[e._v(" 작업진행 ")]):e._e()],1),r("div",{attrs:{clsaa:"d-inline text-center mt-2"}},[!1===e.isNormalPlayer?r("v-btn",{staticClass:"ma-2",attrs:{depressed:"",dark:"",large:"",color:"primary",elevation:"1"},on:{click:e.btnPlayWork}},[e._v(" 작업재개 ")]):!0===e.isNormalPlayer?r("v-btn",{staticClass:"ma-2",attrs:{depressed:"",dark:"",large:"",color:"primary",elevation:"1"},on:{click:e.btnStopWork}},[e._v(" 작업중지 ")]):e._e()],1)]:"normal"===e.workStep.type&&"last"===e.workStep.step?[r("div",{staticClass:"d-inline float-left mt-2"},[r("v-btn",{staticClass:"ma-3",attrs:{depressed:"",dark:"",large:"",color:"blue-grey",elevation:"1"},on:{click:function(t){return e.validate("Y")}}},[e._v(" 작업결과보고서 ")])],1),r("div",{attrs:{clsaa:"d-inline text-center mt-2"}},[!1===e.isNormalPlayer?r("v-btn",{staticClass:"ma-2",attrs:{depressed:"",dark:"",large:"",color:"primary",elevation:"1"},on:{click:e.btnPlayWork}},[e._v(" 작업재개 ")]):!0===e.isNormalPlayer?r("v-btn",{staticClass:"ma-2",attrs:{depressed:"",dark:"",large:"",color:"primary",elevation:"1"},on:{click:e.btnStopWork}},[e._v(" 작업중지 ")]):e._e()],1)]:"outbreak"===e.workStep.type&&"1"===e.workStep.step?[r("div",{staticClass:"d-inline float-left mt-2"},["black"!==e.oxygenDensity.state.color&&"black"!==e.workerHealth.state.color?r("v-btn",{staticClass:"ma-3",attrs:{depressed:"",dark:"",large:"",color:"pink",elevation:"1"},on:{click:e.btnCopeOutbreak}},[e._v(" 자력탈출 ")]):e._e(),r("v-btn",{attrs:{depressed:"",dark:"",large:"",color:"pink",elevation:"1"},on:{click:function(t){return e.validate("N")}}},[e._v(" 작업장탈출 ")])],1),r("div",{attrs:{clsaa:"d-inline text-center mt-2"}},[!1===e.isNormalPlayer?r("v-btn",{staticClass:"ma-2",attrs:{depressed:"",dark:"",large:"",color:"primary",elevation:"1"},on:{click:e.btnPlayWork}},[e._v(" 작업재개 ")]):!0===e.isNormalPlayer?r("v-btn",{staticClass:"ma-2",attrs:{depressed:"",dark:"",large:"",color:"primary",elevation:"1"},on:{click:e.btnStopWork}},[e._v(" 작업중지 ")]):e._e()],1)]:"outbreak"===e.workStep.type&&"last"===e.workStep.step?[r("div",{staticClass:"d-inline float-left mt-2"},[r("v-btn",{attrs:{depressed:"",dark:"",large:"",color:"pink",elevation:"1"},on:{click:function(t){return e.validate("N")}}},[e._v(" 작업장탈출 ")])],1),r("div",{staticClass:"d-inline float-right mt-2"}),r("div",{attrs:{clsaa:"d-inline text-center mt-2"}})]:e._e()],2)],1)],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"3",lg:"2"}},[r("v-sheet",{staticClass:"ml-3 mr-5"},[r("v-sheet",[r("v-subheader",{staticClass:"text-subtitle-1"},[e._v("작업시각")]),r("p",[r("v-icon",{staticClass:"ml-5"},[e._v("mdi-clock")]),r("span",{staticClass:"ml-3"},[e._v(e._s(e.workingTime))]),r("span",{staticClass:"ml-5"},[e._v("[ "+e._s(e.makeWorkingTime(e.workTotalTime))+" ]")])],1)],1),r("v-divider"),r("v-sheet",{staticClass:"mt-4 text-center"},[r("p",[e._v(e._s(e.setWorkerEquipment()))])]),r("v-divider"),r("v-sheet",[r("v-subheader",{staticClass:"text-subtitle-1"},[e._v("작업자건강(100점 만점)")]),r("v-list-item",[r("v-list-item-avatar",[r("v-avatar",{attrs:{color:e.workerHealth.state.color,size:"25"}})],1),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(e.workerHealthValue))])],1),r("v-list-item-content",[r("v-slider",{attrs:{max:e.workerHealth.range.max,min:e.workerHealth.range.min,value:e.workerHealthValue,color:"black","track-color":"grey",vertical:""}})],1)],1),r("v-list-item",[r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(e.workerHealth.state.msg))])],1)],1)],1),r("v-divider"),r("v-sheet",[r("v-subheader",[r("v-btn",{staticClass:"text-subtitle-1",attrs:{plain:""},on:{click:e.btnOxygenDensityHealthObstacle}},[e._v(" 산소농도(%) ")])],1),r("v-list-item",[r("v-list-item-avatar",[r("v-avatar",{attrs:{color:e.oxygenDensity.state.color,size:"25"}})],1),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(e.oxygenDensityGauge))])],1),r("v-list-item-content",[r("v-slider",{attrs:{max:e.oxygenDensity.range.max,min:e.oxygenDensity.range.min,value:10*e.oxygenDensityGauge,color:"black","track-color":"grey",vertical:""}})],1),r("v-fade-transition",[r("v-overlay",{attrs:{value:e.isPrepareOutbreak,absolute:""}},[r("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)],1),r("v-list-item",[r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(e.oxygenDensity.state.msg))])],1)],1)],1),e.isOutbreak?r("v-divider"):e._e(),e.isOutbreak?r("v-sheet",{attrs:{dark:"",color:"red"}},[r("p",{staticClass:"pa-2"},[r("v-icon",[e._v("mdi-led-on")]),e._v(" 돌발상황 발생 ...! ")],1)]):e._e()],1)],1)],1),r("v-fab-transition",[r("v-overlay",{attrs:{absolute:e.oxygenOverAbsolute,value:e.oxygenOverlay}},[e.oxygenImgIsShow?r("v-img",{attrs:{src:e.oxygenImgSrc,"max-width":e.oxygen_maxWidth}},[r("v-btn",{attrs:{color:"success",bottom:"",right:"",absolute:""},on:{click:e.btnCloseOxygenDensityHealthObstacle}},[e._v(" Close ")])],1):e.isCopeOutbreak?r("v-carousel",{attrs:{"hide-delimiters":"",height:e.cope_height},model:{value:e.copeCarousel,callback:function(t){e.copeCarousel=t},expression:"copeCarousel"}},e._l(e.copeItems,(function(t,i){return r("v-carousel-item",{key:i},[r("v-img",{attrs:{src:t.src,cotain:"","max-width":e.cope_max_width}},[r("v-btn",{attrs:{color:"success",bottom:"",right:"",absolute:""},on:{click:e.btnCloseCopeImageOutbreak}},[e._v(" Close ")])],1)],1)})),1):e._e()],1)],1),r("v-snackbar",{attrs:{vertical:e.snackbar.vertical},scopedSlots:e._u([{key:"action",fn:function(t){var i=t.attrs;return[r("v-btn",e._b({attrs:{color:"red",text:""},on:{click:function(t){e.snackbar.isSnackbar=!1}}},"v-btn",i,!1),[e._v(" Close ")])]}}]),model:{value:e.snackbar.isSnackbar,callback:function(t){e.$set(e.snackbar,"isSnackbar",t)},expression:"snackbar.isSnackbar"}},[e._v(" "+e._s(e.snackbar.message)+" ")])],1)},a=[],o=r("b85c"),s=r("1da1"),n=r("5530"),l=(r("96cf"),r("d3b7"),r("a15b"),r("4de4"),r("b0c0"),r("b680"),r("2f62")),c=r("0063"),u=r("7e91"),h=r("57a1"),y=(r("fda2"),r("7aaa")),d=r("6c14"),k=r("cf80"),p="workStore",m="workerStore",v="tdmotionStore",_="workTdmotionStore",g="workerTdmotionStore",b="workerWorkingStore",f="workerResultStore",w="equipmentStore",O="workEquipmentStore",x="workerEquipmentStore",T="activityStore",E="workerActivityStore",R="workerActivityHistoryStore",I="resultStore",W={name:"choke_work",components:{VideoPlayerList:u["a"],VideoPlayering:h["a"]},mixins:[y["a"],d["a"]],data:function(){return{player:null,response:null,playerTitle:"",playerListPrevousIndex:-1,playerListCurrentIndex:0,playerListNextIndex:1,playerListLastIndex:-1,videoOptions:{autoplay:!0,controls:!0,fluid:!0,techOrder:["html5"],plugins:{playlist:{autoadvance:!0}}},videoList:[],isNormalPlayer:null,playerVideoState:"",playerVideoType:"",playerNormalListCurrentIndex:0,playerNormalCurrentTime:0,normalVideoLength:0,playerDrawer:null,playerBtnNextHidden:!1,playerOverlay:!1,playerOverAbsolute:!0,workTime:0,cycleTick:0,workingDisplayInterval:null,workerHealth:{state:{color:"green",msg:""},range:{type:"range",min:0,max:100,value:100,step:1,orient:"vertical"},interval:null},workerHealthValue:100,oxygenDensity:{state:{color:"green",msg:""},range:{type:"range",min:0,max:235,value:235,step:1,orient:"vertical"},interval:null},oxygenDensityGauge:21,oxygenImgSrc:"",oxygenImgIsShow:!1,oxygenOverlay:!1,oxygenOverAbsolute:!0,isEmergencyO2:!1,isShowOxygenVideoPlay:!1,playeringOptions:{autoplay:!0,controls:!0,fluid:!0,sources:[{src:r("5478"),type:"video/mp4"}]},outbreakTime:0,prepareOutbreakTime:15,isOutbreak:!1,isPrepareOutbreak:!1,isCopeOutbreak:!1,copeCarousel:0,copeItems:[{src:r("78c9")},{src:r("bb59")},{src:r("af8a")},{src:r("1133")},{src:r("ec8d")}],workerResult:{worker_id:0,work_id:0,guide_isguide:!1,permit_ispermit:!1,equip_totprotect:0,equip_chkprotect:0,equip_totsafety:0,equip_chksafety:0,oxygen_isinit:!1,oxygen_cntinit:0,oxygen_iswork:!1,oxygen_cntwork:0,work_worktime:0,work_checktime:0,work_istime:!1,outbreak_isrecognize:!1,outbreak_cntrecognize:0,outbreak_isresponse:!1,outbreak_isevacuate:!1,reg_dt:null},resultPayload:{index:0,result:[]},workerWorking:{worker_health_guage:100,oxygen_density_guage:100,oxygen_density_value:20,player_list_current_index:0,outbreak_situation_play_Index:0,worker_id:0,overlay:!1},isTimerRunning:!1,timeWork:0,timerInterval:null,workStep:{type:"normal",step:"0"},snackbar:{isSnackbar:!1,vertical:!0,message:""},gitUrl:"https://goguy.github.io/mts-vv-kit"}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(l["c"])(p,["GE_WORK_LIST"])),Object(l["c"])(m,["GE_WORKER"])),Object(l["c"])(v,["GE_TDMOTION_LIST"])),Object(l["c"])(_,["GE_WORK_TDMOTION_LIST"])),Object(l["c"])(g,["GE_WORKER_TDMOTION_LIST"])),Object(l["c"])(w,["GE_EQUIPMENT_LIST"])),Object(l["c"])(O,["GE_WORK_EQUIPMENT_LIST"])),Object(l["c"])(x,["GE_WORKER_EQUIPMENT_LIST"])),Object(l["c"])(T,["GE_ACTIVITY_LIST"])),Object(l["c"])(E,["GE_WORKER_ACTIVITY_LIST"])),Object(l["c"])(R,["GE_WORKER_ACTIVITY_HISTORY_LIST"])),Object(l["c"])(b,["GE_WORKER_WORKING"])),Object(l["c"])(f,["GE_WORKER_RESULT"])),Object(l["c"])(I,["GE_RESULT","GE_RESULT_LIST"])),{},{watchedPlay:function(){var e=this,t=c["a"].from(this.GE_TDMOTION_LIST).join(c["a"].from(this.GE_WORK_TDMOTION_LIST).where((function(t){return t.work_id===e.GE_WORKER.work_id&&"normal"===t.type})),(function(e){return e.motion_id}),(function(e){return e.motion_id}),(function(e,t){return Object(n["a"])(Object(n["a"])({},e),t)})).orderBy((function(e){return e.disp_ord})).toArray();return t},workName:function(){var e=this,t=this.GE_WORK_LIST.filter((function(t){return t.work_id===e.GE_WORKER.work_id}));return t[0].name},workTotalTime:function(){var e=this,t=this.GE_WORK_LIST.filter((function(t){return t.work_id===e.GE_WORKER.work_id}));return t[0].time},workingTime:function(){var e=this.timeWork/60,t=parseInt(e),r=Math.round(60*(e-t));return t<10&&(t="0"+t),r<10&&(r="0"+r),t+":"+r},oxygen_maxWidth:function(){var e=this.$vuetify.breakpoint.xsOnly?"400":"615";return e},cope_height:function(){var e=this.$vuetify.breakpoint.xsOnly?"545":"818";return e},cope_max_width:function(){var e=this.$vuetify.breakpoint.xsOnly?"400":"600";return e},isWorkerTdmotion:function(){return this.queryWorkTdmotion.length===this.workAndworkerTdmotion.length},equipPenalty:function(){var e=this.queryWorkEquipment("protect").length-this.queryWorkAndWorkerEquipment("protect").length+(this.queryWorkEquipment("safety").length-this.queryWorkAndWorkerEquipment("safety").length);return e},queryWorkTdmotion:function(){var e=this,t=c["a"].from(this.GE_TDMOTION_LIST).where((function(e){return"normal"===e.type})).join(c["a"].from(this.GE_WORK_TDMOTION_LIST).where((function(t){return t.work_id===e.GE_WORKER.work_id})),(function(e){return e.motion_id}),(function(e){return e.motion_id}),(function(e,t){return Object(n["a"])(Object(n["a"])({},e),t)})).toArray();return t},queryWorkerTdmotion:function(){var e=this,t=c["a"].from(this.GE_TDMOTION_LIST).join(c["a"].from(this.GE_WORKER_TDMOTION_LIST).where((function(t){return t.worker_id===e.GE_WORKER.worker_id})),(function(e){return e.motion_id}),(function(e){return e.motion_id}),(function(e,t){return Object(n["a"])(Object(n["a"])({},e),t)})).toArray();return t},workAndworkerTdmotion:function(){var e=c["a"].from(this.queryWorkTdmotion).join(c["a"].from(this.queryWorkerTdmotion),(function(e){return e.motion_id}),(function(e){return e.motion_id}),(function(e,t){return Object(n["a"])(Object(n["a"])({},e),{},{right:t})})).toArray();return e}}),watch:{playerListCurrentIndex:function(e){if(console.log("playerListCurrentIndex",e),"normal"===this.playerVideoType&&(this.playerNormalListCurrentIndex=e,e+1===this.normalVideoLength&&!this.workerResult.outbreak_isresponse)){var t=this.timeWork+174;console.log("outbreakTime",t),console.log("timeWork",this.timeWork),this.setOutbreak(t)}},timeWork:function(e){e===this.outbreakTime-this.prepareOutbreakTime?(this.isPrepareOutbreak=!0,this.isEmergencyO2=!0):e!==this.outbreakTime||this.workerResult.outbreak_isresponse||(console.log("timeWork - isNormalPlayer",this.isNormalPlayer),this.isPrepareOutbreak=!1,this.isOutbreak=!0,this.workStep.type="outbreak",this.workStep.step="1",this.playerNormalCurrentTime=this.player.currentTime(),console.log("playerNormalCurrentTime",this.playerNormalCurrentTime),this.isShowOxygenVideoPlay=!1,this.playVideoPlayer("outbreak")),e===this.workTotalTime+1?this.recordWorkerResult("work_time","N"):this.isWorkerTdmotion&&(this.workerResult.work_istime=!0,this.setAllPlayerStop("normal"))},isShowOxygenVideoPlay:function(e){console.log("isShowOxygenVideoPlay",e),e&&(null===this.isNormalPlayer?(this.workerResult.oxygen_isinit||(this.workerResult.oxygen_isinit=!0),this.workerResult.oxygen_cntinit+=1):this.isNormalPlayer&&(this.workerResult.oxygen_iswork||(this.workerResult.oxygen_iswork=!0),this.workerResult.oxygen_cntwork+=1),this.isPrepareOutbreak&&(this.workerResult.outbreak_isrecognize=!0,this.workerResult.outbreak_cntrecognize+=1))},workerHealthValue:function(e){0===e&&this.setAllPlayerStop("outbreak")},oxygenDensityGauge:function(e){1.6===e&&this.setAllPlayerStop("outbreak")}},created:function(){this.normalVideoLength=this.videoListQuery("normal"),this.GE_RESULT_LIST},mounted:function(){this.getAndSetWorkerWorking(),this.getWorkerResult(),this.response&&this.onPlayer(),this.startTimer()},beforeDestroy:function(){this.player&&this.player.dispose(),clearInterval(this.workingDisplayInterval),clearInterval(this.timerInterval),this.setWorkerResult()},methods:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(l["b"])(b,["AC_WORKER_WORKING"])),Object(l["b"])(f,["AC_WORKER_RESULT"])),Object(l["b"])(I,["AC_RESULT_EDIT"])),{},{setData:function(){this.workStep.type="normal",this.workStep.step="0"},onPlayer:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.player=e,r.next=3,t.player.playlist(t.videoList);case 3:return t.response=r.sent,r.next=6,t.player.playlist.autoadvance(2);case 6:t.response=r.sent,t.playerListLastIndex=t.player.playlist.lastIndex();case 8:case"end":return r.stop()}}),r)})))()},onPlayerState:function(e){switch(e.type){case"play":console.log("player : "+e.type),this.playerVideoState=e.type,this.playerBtnNextHidden=!1,this.isNormalPlayer=!0;break;case"pause":console.log("player : "+e.type),this.playerVideoState=e.type,this.isNormalPlayer=!1;break;case"ended":console.log("player : "+e.type),this.playerVideoState=e.type,this.videoList&&this.tdmotionWorker(this.GE_WORKER.worker_id,this.videoList[this.playerListCurrentIndex].sources[0].motion_id),this.videoList.length-this.playerListCurrentIndex>1&&(this.playerBtnNextHidden=!0);break;case"loadeddata":console.log("player : "+e.type),this.playerListPrevousIndex=this.player.playlist.previousIndex(),this.playerListCurrentIndex=this.player.playlist.currentItem(),this.playerListNextIndex=this.player.playlist.nextIndex(),this.changePlayerTitle();break;case"waiting":console.log("player : "+e.type);break;case"playing":console.log("player : "+e.type),this.playerVideoState=e.type;break;case"canplay":console.log("player : "+e.type);break;case"canplaythrough":console.log("player : "+e.type);break;default:console.log("default")}this.isOutbreak||this.historyActivityWorker(this.getActivityId("작업하기"),this.GE_WORKER.worker_id,"TDMOTION",this.videoList[this.playerListCurrentIndex].sources[0].motion_id,e.type,this.playerListCurrentIndex)},changePlayerTitle:function(){this.playerTitle=this.videoList[this.playerListCurrentIndex].sources.length>0?this.videoList[this.playerListCurrentIndex].sources[0].name:"noTitle"},vjsPlayerListLink:function(e){console.log("n : "+e),this.player.playlist.currentItem(e-1)},previousPlayer:function(){this.player.playlist.previous()},nextPlayer:function(){this.player.playlist.next()},checkVideoListQuery:function(e){var t=this,r=c["a"].from(this.GE_TDMOTION_LIST).join(c["a"].from(this.GE_WORK_TDMOTION_LIST).where((function(r){return r.work_id===t.GE_WORKER.work_id&&r.type===e})),(function(e){return e.motion_id}),(function(e){return e.motion_id}),(function(e,t){return Object(n["a"])(Object(n["a"])({},e),t)})).orderBy((function(e){return e.disp_ord})).toArray();return r},playVideoPlayer:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.videoListQuery(e),!(t.videoList.length>0)){r.next=7;break}return r.next=4,t.player.playlist(t.videoList);case 4:t.response=r.sent,t.player.playlist.first(),"normal"===e&&(t.player.playlist.currentItem(t.playerNormalListCurrentIndex),t.player.currentTime(t.playerNormalCurrentTime),t.player.play());case 7:case"end":return r.stop()}}),r)})))()},videoListQuery:function(e){var t=this;this.playerVideoType=e;try{var r=c["a"].from(this.GE_TDMOTION_LIST).join(c["a"].from(this.GE_WORK_TDMOTION_LIST).where((function(r){return r.work_id===t.GE_WORKER.work_id&&r.type===e})),(function(e){return e.motion_id}),(function(e){return e.motion_id}),(function(e,t){return Object(n["a"])(Object(n["a"])({},e),t)})).orderBy((function(e){return e.disp_ord})).toArray();this.videoList=[];var i,a=Object(o["a"])(r);try{for(a.s();!(i=a.n()).done;){var s=i.value;this.videoList.push({sources:[{motion_id:s.motion_id,disaster_id:s.disaster_id,name:s.name,order:s.disp_ord-1,src:this.getVideoUrl(s.video_url),type:s.video_type}],poster:this.getImageUrl(s.img_url)})}}catch(l){a.e(l)}finally{a.f()}return this.videoList.length}catch(u){console.log("e : "+u)}},getWorkTime:function(){var e=this,t=this.GE_WORK_LIST.filter((function(t){return t.work_id===e.GE_WORKER.work_id}));return t.length>0?t[0].time:100},setWorkerEquipment:function(){var e="보호구장비 "+this.queryWorkAndWorkerEquipment("protect").length+"/"+this.queryWorkEquipment("protect").length+", 안전장비"+this.queryWorkAndWorkerEquipment("safety").length+"/"+this.queryWorkEquipment("safety").length;return e},getAndSetWorkerWorking:function(){this.cycleTick=3,this.workTime=this.getWorkTime(),this.runWorkingInterval(this.cycleTick,this.equipPenalty)},getWorkerResult:function(){this.GE_WORKER_RESULT.worker_id===this.GE_WORKER.worker_id&&(this.workerResult=this.GE_WORKER_RESULT,this.workerResult.work_checktime=0,this.workerResult.work_istime=!1),this.workerResult.outbreak_isresponse=!1},setWorkerResult:function(){this.workerResult.worker_id=this.GE_WORKER.worker_id,this.workerResult.work_id=this.GE_WORKER.work_id,this.workerResult.guide_isguide=this.GE_WORKER.guide_chk,this.workerResult.permit_ispermit=this.GE_WORKER.order_chk,this.workerResult.equip_totprotect=this.queryWorkEquipment("protect").length,this.workerResult.equip_chkprotect=this.queryWorkAndWorkerEquipment("protect").length,this.workerResult.equip_totsafety=this.queryWorkEquipment("safety").length,this.workerResult.equip_chksafety=this.queryWorkAndWorkerEquipment("safety").length,this.workerResult.work_worktime=this.workTotalTime,this.AC_WORKER_RESULT(this.workerResult)},setOutbreak:function(e){var t=.6*e,r=.1*e;this.checkVideoListQuery("outbreak").length>0?(this.outbreakTime=k["a"].NormalDistribution(t,r),this.outbreakTime=Math.round(this.outbreakTime,0)):this.outbreakTime=-1,console.log("this.outbreakTime : "+this.outbreakTime)},runWorkingInterval:function(e,t){var r=this;0!==this.equipPenalty&&(this.workerHealthValue-=t),this.workingDisplayInterval=setInterval((function(){var e=1;r.isEmergencyO2?(r.emergencyO2(),0!==r.equipPenalty?(e=2.5,r.calcWorkerHealth(e)):(e=3,r.calcWorkerHealth(e))):(r.normalO2Random(),0!==r.equipPenalty&&r.calcWorkerHealth(e)),r.oxygenDensity.state=k["a"].oxygenDensityState(r.oxygenDensityGauge),r.workerHealth.state=k["a"].workerHealthState(r.workerHealthValue)}),1e3*e)},normalO2Random:function(){var e=k["a"].generateRandom(19,23.5);this.oxygenDensityGauge=e.toFixed(1)},emergencyO2:function(){var e=.97*this.oxygenDensityGauge;this.oxygenDensityGauge=e.toFixed(1)},calcWorkerHealth:function(e){this.workerHealthValue-e<=0?this.workerHealthValue=0:this.workerHealthValue=Math.floor(this.workerHealthValue-e)},checkOxygenEquip:function(){var e=this.queryWorkAndWorkerEquipment("safety").filter((function(e){return"산소농도측정기"===e.name}));return console.log("query.length",e.length),e.length},btnOxygenDensity:function(){0!==this.checkOxygenEquip()?this.isShowOxygenVideoPlay?this.isShowOxygenVideoPlay&&(this.isShowOxygenVideoPlay=!1,this.isNormalPlayer&&this.player.play()):(this.isShowOxygenVideoPlay=!0,this.checkIsNormalPlayer(),this.playOxygenVideoPlayer(),this.setWorkerHealthValue(),this.isPrepareOutbreak?this.recordWorkerResult("outbreak_recognize","Y"):this.recordWorkerResult("work_check","Y")):this.setSnackbar("산소농도를 측정하는 장비가 없습니다.")},checkIsNormalPlayer:function(){var e=this;this.isNormalPlayer&&(this.player.pause(),setTimeout((function(){return e.isNormalPlayer=!0}),500))},playOxygenVideoPlayer:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==e.$refs.pVideoPlayering.playering){t.next=10;break}if(r=e.setPlayeringOptions("measure"),null==r){t.next=7;break}return t.next=5,e.$refs.pVideoPlayering.playingVideo(r);case 5:t.next=8;break;case 7:alert("문제가 발생했습니다. 관리자에게 문의바랍니다.");case 8:t.next=11;break;case 10:e.$refs.pVideoPlayering.playering.play();case 11:case"end":return t.stop()}}),t)})))()},setPlayeringOptions:function(e){var t=this,r=null,i=c["a"].from(this.GE_TDMOTION_LIST).join(c["a"].from(this.GE_WORK_TDMOTION_LIST).where((function(r){return r.work_id===t.GE_WORKER.work_id&&r.type===e})),(function(e){return e.motion_id}),(function(e){return e.motion_id}),(function(e,t){return Object(n["a"])(Object(n["a"])({},e),t)})).orderBy((function(e){return e.disp_ord})).toArray();return 1===i.length&&(r={autoplay:!0,controls:!0,fluid:!0,sources:[{src:this.getVideoUrl(i[0].video_url),type:i[0].video_type}],poster:this.getImageUrl(i[0].img_url)}),r},setWorkerHealthValue:function(){this.workerHealthValue+10>100?this.workerHealthValue=100:this.workerHealthValue+=10},btnPlayWork:function(){this.player.play()},btnStopWork:function(){this.player.pause()},btnCopeOutbreak:function(){console.log("btnCopeOutbreak"),this.isOutbreak=!1,this.isCopeOutbreak=!0,this.workStep.type="normal",this.workStep.step="1",this.playVideoPlayer("escape")},btnCopeImageOutbreak:function(){this.isCopeOutbreak=!0,this.oxygenOverlay=!0},btnCloseCopeImageOutbreak:function(){this.isCopeOutbreak=!1,this.oxygenOverlay=!1},btnNomalVideoPlayer:function(){this.workerResult.outbreak_isresponse=!0,this.isEmergencyO2=!1,this.workerHealthValue=90,this.outbreakTime=-1,this.isOutbreak=!1,this.isCopeOutbreak=!1,this.workStep.type="normal",this.workStep.step="0",this.playVideoPlayer("normal")},btnOxygenDensityHealthObstacle:function(){this.oxygenOverlay=!0,this.oxygenImgIsShow=!0,this.oxygenImgSrc=r("319e")},btnCloseOxygenDensityHealthObstacle:function(){this.oxygenOverlay=!1,this.oxygenImgIsShow=!1},getVideoUrl:function(e){var t=e.substring(e.lastIndexOf("/"),e.length);return t=this.gitUrl+"/videos"+t,t},getImageUrl:function(e){var t=e.substring(e.lastIndexOf("/"),e.length);return t=this.gitUrl+"/images"+t,t},validate:function(e){this.recordWorkerResult("outbreak_cope",e),this.nextStep()},nextStep:function(){this.isOutbreak&&(this.workerResult.outbreak_isEvacuate=!0),this.checkWorkTime(),this.activityWorker(this.GE_WORKER.worker_id,this.getActivityId("작업하기")),this.$router.push("/work/reporting")},checkWorkTime:function(){this.timeWork>this.workTotalTime?this.recordWorkerResult("work_time","N"):this.recordWorkerResult("work_time","Y")},queryWorkEquipment:function(e){var t=this,r=c["a"].from(this.GE_EQUIPMENT_LIST).join(c["a"].from(this.GE_WORK_EQUIPMENT_LIST).where((function(e){return e.work_id===t.GE_WORKER.work_id})),(function(e){return e.equipment_id}),(function(e){return e.equipment_id}),(function(e,t){return Object(n["a"])(Object(n["a"])({},e),t)})).where((function(t){return t.type===e})).orderBy((function(e){return e.disp_ord})).toArray();return r},queryWorkerEquipment:function(e){var t=this,r=c["a"].from(this.GE_EQUIPMENT_LIST).join(c["a"].from(this.GE_WORKER_EQUIPMENT_LIST).where((function(e){return e.worker_id===t.GE_WORKER.worker_id})),(function(e){return e.equipment_id}),(function(e){return e.equipment_id}),(function(e,t){return Object(n["a"])(Object(n["a"])({},e),t)})).where((function(t){return t.type===e})).orderBy((function(e){return e.disp_ord})).toArray();return r},queryWorkAndWorkerEquipment:function(e){var t=c["a"].from(this.queryWorkEquipment(e)).join(c["a"].from(this.queryWorkerEquipment(e)),(function(e){return e.equipment_id}),(function(e){return e.equipment_id}),(function(e,t){return Object(n["a"])(Object(n["a"])({},e),{},{right:t})})).toArray();return t},makeWorkingTime:function(e){var t=e/60,r=parseInt(t),i=Math.round(60*(t-r));return r<10&&(r="0"+r),i<10&&(i="0"+i),r+":"+i},startTimer:function(){var e=this;this.isTimerRunning=!0,this.timerInterval=setInterval((function(){e.timeWork++}),1e3)},setAllPlayerStop:function(e){this.workStep.type=e,this.workStep.step="last","outbreak"===e?this.playerOverlay=!0:"normal"===e&&(this.playerOverlay=!1,this.isOutbreak=!1),this.isCopeOutbreak=!1,this.outbreakTime=-1,this.prepareOutbreakTime=-1},setSnackbar:function(e){this.snackbar.isSnackbar=!0,this.snackbar.message=e,this.snackbar.vertical=!0},recordWorkerResult:function(e,t){var r=this,i=this.GE_WORK_LIST.filter((function(e){return e.work_id===r.GE_WORKER.work_id}))[0].type,a=this.GE_RESULT_LIST.filter((function(t){return t.name===e&&t.type===i}))[0];a.worker_id=this.GE_WORKER.worker_id,a.is_yn=t,this.resultPayload.index=a.result_id,this.resultPayload.result=a,this.AC_RESULT_EDIT(this.resultPayload)}})},S=W,C=(r("2b75"),r("2877")),L=r("6544"),P=r.n(L),V=r("8212"),j=r("8336"),N=r("b0af"),G=r("5e66"),q=r("3e35"),D=r("62ad"),K=r("a523"),A=r("ce7e"),H=r("0789"),M=r("132d"),U=r("adda"),B=r("8860"),Q=r("da13"),z=r("8270"),$=r("5d23"),Y=r("1baa"),F=r("f774"),J=r("a797"),X=r("490a"),Z=r("0fd9"),ee=r("8dd9"),te=r("ba0d"),re=r("2db4"),ie=r("e0c7"),ae=Object(C["a"])(S,i,a,!1,null,null,null);t["default"]=ae.exports;P()(ae,{VAvatar:V["a"],VBtn:j["a"],VCard:N["a"],VCarousel:G["a"],VCarouselItem:q["a"],VCol:D["a"],VContainer:K["a"],VDivider:A["a"],VFabTransition:H["c"],VFadeTransition:H["d"],VIcon:M["a"],VImg:U["a"],VList:B["a"],VListItem:Q["a"],VListItemAvatar:z["a"],VListItemContent:$["a"],VListItemGroup:Y["a"],VListItemTitle:$["c"],VNavigationDrawer:F["a"],VOverlay:J["a"],VProgressCircular:X["a"],VRow:Z["a"],VSheet:ee["a"],VSlider:te["a"],VSnackbar:re["a"],VSubheader:ie["a"]})}}]);
//# sourceMappingURL=chunk-000d1650.58b8c6b6.js.map